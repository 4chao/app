var e=Object.defineProperty,t=(t,a)=>e(t,"name",{value:a,configurable:!0});import{d as a,o as l,a as n,r as s,b as i,c as o,w as d,n as r,l as u,p as c,x as v,y as p,_ as m,i as f,g as h,L as x,M as g,F as b,J as y,k as _,j as w,e as $,a0 as k,a1 as I,m as V,a2 as N,h as j,X as T,t as S,H as D,a3 as B}from"./index.6e76e36e.js";import{D as C,_ as O,i as E,a as P}from"./index.a651ff5d.js";import{_ as U,a as z}from"./sys.965ff6bd.js";const F={mounted(){console.log(this.$ownerInstance),new C(this.$ownerInstance.$el)},methods:{getId(...e){console.log(e)}}};var L=t((e=>{e.$renderjs||(e.$renderjs=[]),e.$renderjs.push("render"),e.mixins||(e.mixins=[]),e.mixins.push({beforeCreate(){this.render=this},mounted(){this.$ownerInstance=this.$gcd(this,!0)}}),e.mixins.push(F)}),"block0$1");const R=a({__name:"Droppable",props:{id:{default:"unknown"}},setup:e=>(t,a)=>(l(),n("div",{class:"droppable","data-id":e.id,relative:""},[s(t.$slots,"default",{},(()=>[i("div",{h30:""})]),!0),i("div",{contents:"",class:"normal"},[s(t.$slots,"normal",{},void 0,!0)]),i("div",{contents:"",class:"active"},[s(t.$slots,"active",{},void 0,!0)])],8,["data-id"]))});"function"==typeof L&&L(R);var G=U(R,[["__scopeId","data-v-196bf6be"]]);const H={name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default:()=>[0,0]},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default:()=>({})}},data:()=>({}),computed:{width(){return 8*String(this.text).length+12},classNames(){const{inverted:e,type:t,size:a,absolute:l}=this;return[e?"uni-badge--"+t+"-inverted":"","uni-badge--"+t,"uni-badge--"+a,l?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let e=this.width/2,t=10;this.isDot&&(e=5,t=5);const a=`${-e+this.offset[0]}px`,l=`${-t+this.offset[1]}px`,n={rightTop:{right:a,top:l},rightBottom:{right:a,bottom:l},leftBottom:{left:a,bottom:l},leftTop:{left:a,top:l}},s=n[this.absolute];return s||n.rightTop},dotStyle(){return this.isDot?{width:"10px",minWidth:"0",height:"10px",padding:"0",borderRadius:"10px"}:{}},displayValue(){const{isDot:e,text:t,maxNum:a}=this;return e?"":Number(t)>a?`${a}+`:t}},methods:{onClick(){this.$emit("click")}}};function M(e,t,a,n,i,h){const x=m,g=f;return l(),o(g,{class:"uni-badge--x"},{default:d((()=>[s(e.$slots,"default",{},void 0,!0),a.text?(l(),o(x,{key:0,class:r([h.classNames,"uni-badge"]),style:u([h.positionStyle,a.customStyle,h.dotStyle]),onClick:t[0]||(t[0]=e=>h.onClick())},{default:d((()=>[c(v(h.displayValue),1)])),_:1},8,["class","style"])):p("v-if",!0)])),_:3})}t(M,"_sfc_render");var W=U(H,[["render",M],["__scopeId","data-v-18bbf508"]]);var A=U(a({__name:"Toolbar",emits:["new-paragraph"],setup(e,{emit:t}){let a=h(!1);return(e,s)=>{const o=x(g("uni-badge"),W),r=O;return l(),n("div",{class:"toolbar"},[i("div",{class:"actions"},[a.value?(l(),n(b,{key:0},[i("div",{class:"publish"},[c(" 发布 "),i("div",{mlxs:""},[i("div",{"i-ri-share-forward-2-fill":""})])]),i("div",{class:"share"},[i("div",null,[i("div",{"i-ri-user-add-line":""})])])],64)):(l(),n("div",{key:1,"bg-white":"","flex-center":"",pxsm:"",prlg:""},[(l(),n(b,null,y(3,(e=>i("div",{key:e,"w-100":"","flex-center":""},[_(o,{size:"small",text:"10k",absolute:"rightTop",offset:[2,4],"max-num":NaN,"custom-style":{backgroundColor:"#fff",color:"#000",borderRadius:"0",padding:"0 4rpx"}},{default:d((()=>[1==e?(l(),n("div",{key:0,"i-ri-chat-3-line":"",w50:"",h50:""})):p("v-if",!0),2==e?(l(),n("div",{key:1,"i-ri-heart-3-line":"",w50:"",h50:""})):p("v-if",!0),3==e?(l(),n("div",{key:2,"i-ri-inbox-line":"",w50:"",h50:""})):p("v-if",!0)])),_:2},1024)]))),64))]))]),i("div",{w40:""}),_(r,{onOnPanend:s[0]||(s[0]=e=>t("new-paragraph",e))},{default:d((()=>[i("div",{class:"fab"},[i("div",{"i-fluent-add-28-regular":"",w59:"",h59:""})])])),_:1}),i("div",{class:"fabBack"},[i("div",null,[i("div",{"i-ri-close-line":"",w39:"",h39:""})])])])}}}),[["__scopeId","data-v-03aaa4e0"]]);E&&window,E&&window.document,E&&window.navigator,E&&window.location;const J="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},X="__vueuse_ssr_handlers__";var q,K;function Q(e,a,l,n={}){var s,i,o;const{passive:d=!1,eventName:r,deep:u=!1,defaultValue:c}=n,v=k(),p=l||(null==v?void 0:v.emit)||(null==(s=null==v?void 0:v.$emit)?void 0:s.bind(v))||(null==(o=null==(i=null==v?void 0:v.proxy)?void 0:i.$emit)?void 0:o.bind(null==v?void 0:v.proxy));let m=r;a||(a="modelValue"),m=r||m||`update:${a.toString()}`;const f=t((()=>P(e[a])?e[a]:c),"getValue");if(d){const t=h(f());return w((()=>e[a]),(e=>t.value=e)),w(t,(t=>{(t!==e[a]||u)&&p(m,t)}),{deep:u}),t}return $({get:()=>f(),set(e){p(m,e)}})}J[X]=J[X]||{},J[X],(K=q||(q={})).UP="UP",K.RIGHT="RIGHT",K.DOWN="DOWN",K.LEFT="LEFT",K.NONE="NONE",t(Q,"useVModel");const Y={mounted(){this.$ownerInstance.$el.addEventListener("keyup",(()=>{console.log("keyup",this.$ownerInstance.$el.innerText),this.$ownerInstance.callMethod("onInput",this.$ownerInstance.$el.innerText)}))}};var Z=t((e=>{e.$renderjs||(e.$renderjs=[]),e.$renderjs.push("render"),e.mixins||(e.mixins=[]),e.mixins.push({beforeCreate(){this.render=this},mounted(){this.$ownerInstance=this.$gcd(this,!0)}}),e.mixins.push(Y)}),"block0");const ee=a({...{methods:{onInput(e){this.$emit("update:modelValue",e)}}},__name:"index",props:{modelValue:null,placeholder:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const a=Q(I(e,["placeholder"]),"modelValue",t);return(t,s)=>(l(),n("div",{placeholder:e.placeholder,class:"content",contenteditable:""},v(V(a)),9,["placeholder"]))}});"function"==typeof Z&&Z(ee);var te=U(ee,[["__scopeId","data-v-eeadecee"]]);var ae=U(a({__name:"Paragraph",props:{context:null},setup(e){let t=h(!1);return N((()=>{t.value=e.context.new})),(a,s)=>(l(),n("div",{class:r(["paragraph",{new:t.value}])},v(e.context),3))}}),[["__scopeId","data-v-ad740a9c"]]);var le=U(a({__name:"Group",props:{context:null},setup(e){let t=h("");return j((()=>{console.log("group name",t.value)})),(a,s)=>{const d=te;return l(),n("div",{class:"group",mbxl:""},[i("div",{"flex-center":"",px:"",relative:"",mb:""},[_(d,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=e=>t.value=e),placeholder:"未命名分组","text-56":"","font-bold":""},null,8,["modelValue"]),i("div",{border:"t-dashed hex-e8e8e8","flex-1":"",mx:""}),i("div",{"i-ri-menu-4-line":"","text-56":"","text-gray":""})]),i("div",{contents:""},[(l(!0),n(b,null,y(e.context.paragraph,((e,t)=>(l(),o(ae,{key:t,context:e},null,8,["context"])))),128))])])}}}),[["__scopeId","data-v-858e387e"]]);var ne=U(a({__name:"index",setup(e){let t="",a=0,s=0,r=0,u="";const c=T(),v=S(c,"params");v.value&&(console.log("params",v.value),v.value.data&&v.value.data.description&&(u=v.value.data.description),v.value.data&&v.value.data.title&&(t=v.value.data.title),v.value.data&&v.value.data.comment_num&&(a=v.value.data.comment_num),v.value.data&&v.value.data.coin_num&&(s=v.value.data.upvote_num),v.value.data&&v.value.data.favorite_num&&(r=v.value.data.favorite_num));let m=h(!1),f=h(t),w=h(u);h(s),h(r),h(a);const $=D([]);return(e,t)=>{const a=B,s=G,r=x(g("sys"),z);return l(),o(r,null,{fixed:d((()=>[_(A,{onNewParagraph:t[0]||(t[0]=e=>$.push({paragraph:[{new:!0}]}))})])),default:d((()=>[i("div",{"flex-center":""},[i("div",{pxy:""},[i("div",{"i-ri-arrow-left-line":""})]),i("div",{"flex-1":""}),i("div",{pxy:"","text-xs":"","text-gray":""},"自动保存成功"),i("div",{pxy:""},[i("div",{"i-ri-menu-line":""})])]),i("div",{pxy:"",mb:""},[_(a,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=e=>f.value=e),"auto-height":"",placeholder:"请输入标题",class:"textarea",maxlength:"400","placeholder-style":"color: #D5D5E0;"},null,8,["modelValue"]),i("div",{relative:""},[m.value||w.value?p("v-if",!0):(l(),n("div",{key:0,absolute:"","inset-0":"","flex-center":"","justify-start":"","text-gray":"","bg-white":"","z-100":"",onClick:t[2]||(t[2]=e=>m.value=!0)},[i("div",{"i-ri-ball-pen-fill":""}),i("div",{mlxs:""},"添加描述")])),_(a,{modelValue:w.value,"onUpdate:modelValue":t[3]||(t[3]=e=>w.value=e),"auto-height":"",focus:m.value,onBlur:t[4]||(t[4]=e=>m.value=!1),onFocus:t[5]||(t[5]=e=>m.value=!0)},null,8,["modelValue","focus"])])]),$.length?p("v-if",!0):(l(),n("div",{key:0,mtxl:"",p60:""},[i("div",{class:"empty-target","flex-center":""},[_(s,{id:"empty-target",class:"empty-target-dropbox","flex-center":""},{normal:d((()=>[i("div",{"text-bluegray":""},"将"),i("div",{class:"fab","transform-scale-50":"","m--15":""},[i("div",{"i-fluent-add-28-regular":"",w70:"",h70:""})]),i("div",{"text-bluegray":""},"拖拽到此处, 添加你的第一个段落")])),active:d((()=>[i("div",{"text-bluegray":""},"在此释放, 添加你的第一个段落")])),_:1})])])),(l(!0),n(b,null,y($,((e,t)=>(l(),o(le,{key:t,context:e},null,8,["context"])))),128))])),_:1})}}}),[["__scopeId","data-v-466f3f63"]]);export{ne as default};

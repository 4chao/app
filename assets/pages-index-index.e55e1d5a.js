import{d as e,o as t,c as s,w as l,r as a,i,a as n,t as r,b as o,u,e as d,f as h,g as c,h as v,j as p,k as m,l as x,n as f,m as g,p as b,q as y,v as w,s as H,x as k,y as I,z as $,F as T,A as _,B as j,I as B,S as G,C,D as z,E,G as q,H as U,J as L,K as O,L as S}from"./index.08c3bb8b.js";import{_ as F,a as M}from"./sys.dd02a16c.js";const D={data:()=>({scrollTop:0,min:0,max:0,focus:!0,height:12}),watch:{focus(e){e||(this.height=Math.abs(this.height-this.min)<Math.abs(this.height-this.max)?this.min:this.max,this.setHeight(!0))},scrollTop(e,t){if(e<=0)return this.height=this.max,this.setHeight(!0);this.focus&&(this.height+=t-e||0,this.height<this.min&&(this.height=this.min),this.height>this.max&&(this.height=this.max),this.setHeight(!1))}},mounted(){this.min=Number(this.$ownerInstance.$el.dataset.height),window.addEventListener("scroll",this.scrollHandler),window.addEventListener("touchstart",(()=>this.focus=!0)),window.addEventListener("touchend",(()=>this.focus=!1))},methods:{propObserver(e){console.log("props",e)},scrollHandler(){this.scrollTop=document.documentElement.scrollTop||document.body.scrollTop},setHeight(e){this.$ownerInstance.$el.style.transition=e?"all 0.3s cubic-bezier(.15,.7,.35,1)":"none",this.$ownerInstance.$el.style.transform="translateY("+this.height+"px)"}}};var R=e=>{e.$renderjs||(e.$renderjs=[]),e.$renderjs.push("renderBiz"),e.mixins||(e.mixins=[]),e.mixins.push({beforeCreate(){this.renderBiz=this},mounted(){this.$ownerInstance=this.$gcd(this,!0)}}),e.mixins.push(D)};const V=e({props:{back:{default:40}},setup:e=>(n,r)=>{const o=i;return t(),s(o,{id:"sticker","data-height":e.back,style:{willchange:"transform"}},{default:l((()=>[a(n.$slots,"default",{},void 0,!0)])),_:3},8,["data-height"])}});R(V);var K=F(V,[["__scopeId","data-v-0fad4d9b"]]);const A={mounted(){let e=document.querySelector(".mescroll-body");e.style.transition="transform 0.3s",new MutationObserver((([{target:t}])=>{"true"==t.dataset.open?(e.style.transform="scale(0.9)",e.style.transformOrigin="center "+(document.documentElement.scrollTop+document.documentElement.clientHeight/2)+"px"):(e.style.transform="none",e.style.transformOrigin="center "+(document.documentElement.scrollTop+document.documentElement.clientHeight/2)+"px")})).observe(document.querySelector("#renderHelper"),{attributes:!0})}};var J=e=>{e.$renderjs||(e.$renderjs=[]),e.$renderjs.push("renderBiz"),e.mixins||(e.mixins=[]),e.mixins.push({beforeCreate(){this.renderBiz=this},mounted(){this.$ownerInstance=this.$gcd(this,!0)}}),e.mixins.push(A)};const N=e({setup(e){var s;let a=n("searchInfo"),i=r(a,"value"),C=r(a,"searched");const z=o({get:()=>F.value&&!O.value&&i.value||C.value,set:e=>i.value=e});function E(e){return e*v.Global.navBarHeight+"px"}let q=u(30);var U=!1;let L=d(!1),O=d(!1),S=d(!1),F=o({get:()=>L.value||O.value,set:()=>L.value=O.value=S.value=!1});function M(){return 1==S.value?S.value=!1:F.value?O.value?O.value=!1:i.value?i.value="":F.value=!1:S.value=!0}h((()=>O.value&&(L.value=!1))),c(F,(()=>S.value=!1));let D=d(0);null==(s=uni.onKeyboardHeightChange)||s.call(uni,(({height:e})=>{D.value=e,e&&(R.value=A.value)}));let R=d(u(1e3)),V=d(u(500)),A=o((()=>{let e=v.Global.systemInfo.windowHeight-v.Global.systemInfo.statusBarHeight-D.value-u(50)||R.value;return e>R.value?R.value:e})),J=null;const N=()=>J=setTimeout(W,5e3),P=()=>clearTimeout(J),W=()=>(_({}),v.to("#test"));return(e,s)=>{const a=j,i=B,n=G;return t(),p(T,null,[m(K,{class:"sticker",style:g({top:e.app.Global.systemInfo.statusBarHeight+"px"}),back:-e.app.Global.navBarHeight-e.app.Global.systemInfo.statusBarHeight-b(q)},{default:l((()=>[x("div",{style:g({height:e.app.Global.navBarHeight+"px",marginRight:-e.app.Global.capsuleMarginRight+"px",padding:b(U)?"":"20rpx 0 0 0",paddingRight:e.app.Global.capsuleWidth+"px"}),relative:"",flex:"",onTouchmove:s[6]||(s[6]=$((()=>{}),["stop","prevent"]))},[x("div",{"shadow-box":"",class:f(["menu",{act:S.value}]),style:g({right:b(U)?"40rpx":"20rpx"})},null,6),x("div",{style:g({height:A.value+"px"}),relative:"",flex:"","flex-grow":"","flex-col":"","pointer-events-none":""},[x("div",{"shadow-box":"","pointer-events-auto":"",mxsm:"",pxsm:"",style:g({height:e.app.Global.navBarHeight+"px"}),"flex-center":"","justify-start":""},[x("div",{"flex-center":"",onTouchstart:N,onTouchmove:P,onTouchend:P},[y(m(a,{style:g({height:E((b(U),.6)),width:E((b(U),.6))}),class:"smooth",src:"https://q2.qlogo.cn/headimg_dl?dst_uin=2490445193&spec=100&v=0.5662477152747005",onClick:s[0]||(s[0]=e=>O.value=!O.value)},null,8,["style"]),[[w,e.app.User.isLogin]]),y(x("div",{style:g({height:E((b(U),.6)),width:E((b(U),.6))}),class:"smooth login-btn","flex-center":"","text-20":"","font-bold":"","text-white":"",onClick:s[1]||(s[1]=t=>e.app.to("login").then((t=>t&&e.$u.toast(t))))}," 登录 ",4),[[w,!e.app.User.isLogin]])],32),x("div",{relative:"","h-full":"","flex-grow":"",mxsm:""},[m(i,{modelValue:b(z),"onUpdate:modelValue":s[2]||(s[2]=e=>H(z)?z.value=e:null),class:f(["ab",{hide:O.value}]),"h-full":"","w-full":"",placeholder:"搜索思潮",style:g({fontSize:E(b(U)?.35:.3)}),onFocus:s[3]||(s[3]=e=>{D.value=e.detail.height,L.value=!0})},null,8,["modelValue","class","style"]),x("div",{class:f(["ab",{hide:!O.value}]),"flex-center":"","bg-white":""},[x("div",{"flex-1":"",flex:"","flex-col":"","justify-center":""},[x("div",{flex:"","items-center":""},[x("span",{"text-38":"",mrxs:""},k(e.app.User.userInfo.username),1),x("span",{"text-20":"","text-gray":"","self-end":"",pb4:""},"#"+k(e.app.User.userInfo.id),1),x("div",{"flex-1":""}),I(" TODO: 上线前搞个内测徽章 "),x("div",null,"徽章")]),x("div",{flex:"","items-center":"","text-24":"","text-gray-500":""},[x("div",{"i-ri-edit-2-fill":"",mrxs:"","shrink-0":""}),"$Default"==e.app.User.userInfo.signature?(t(),p("div",{key:0},"点此设置签名...")):(t(),p("div",{key:1,"line-clamp-1":"","break-all":""},k(e.app.User.userInfo.signature),1))])]),x("div",{style:{height:"60%"},"w-1px":"",mlsm:"",mrxs:"","bg-gray-200":""}),x("div",{"flex-center":"",mlsm:"",style:g({fontSize:E((b(U),.35))}),onClick:s[4]||(s[4]=t=>e.app.to("setting"))},[x("div",{"i-ri-settings-2-line":""})],4)],2)]),x("div",{"flex-center":"",style:g({fontSize:E((b(U),.5))})},[x("div",{"i-ri-close-fill":"",class:f(["x",{act:F.value||S.value}]),onClick:$(M,["prevent","stop"])},null,10,["onClick"])],4)],4),x("div",{"flex-grow":"",relative:"","pointer-events-none":""},[m(n,{"scroll-y":"",class:f(["ab history",{hide:!L.value}]),"border-1":"",onTouchend:s[5]||(s[5]=$((()=>{}),["prevent"]))},{default:l((()=>[I(" 搜索记录和推荐 "),x("div",{py30:""},"111111111111111111111"),x("div",{py30:""},"111111111111111111111"),x("div",{py30:""},"111111111111111111111"),x("div",{py30:""},"111111111111111111111"),x("div",{py30:""},"111111111111111111111"),x("div",{py30:""},"111111111111111111111")])),_:1},8,["class"]),x("div",{class:f(["ab profile",{hide:!O.value}]),style:g({height:V.value+"px"}),fira:"","border-1":""},[x("div",null,"")],6)])],4)],36)])),_:1},8,["style","back"]),x("div",{class:f(["mask",{show:F.value||S.value}]),onClick:s[7]||(s[7]=$((e=>F.value=!1),["stop"])),onTouchmove:s[8]||(s[8]=$((()=>{}),["stop","prevent"]))},null,34),x("div",{id:"renderHelper","data-open":F.value||S.value},null,8,["data-open"])],64)}}});J(N);var P=F(N,[["__scopeId","data-v-65444331"]]);var W=F(e({setup:e=>(e,s)=>{const l=j;return t(),p("div",{mblg:"",mxsm:""},[x("div",{flex:"","justify-between":""},[x("div",{mbxs:"","flex-center":"","text-gray":"","text-20":""},[m(l,{w35:"",h35:"",mrxs:"",class:"smooth",src:"https://q2.qlogo.cn/headimg_dl?dst_uin=2490445193&spec=100&v=0.5662477152747005"}),x("div",null,"PentaTea")]),x("div",{"flex-center":"","text-gray":"","text-20":""},[x("div",{"i-ri-eye-fill":"",mrxs:""}),C(" 关注的人 ")])]),x("div",{class:"card",thin:""},[x("div",{"w-full":"",h100:""},[m(l,{"w-full":"","h-full":"",mode:"aspectFill",src:"https://repository-images.githubusercontent.com/279473495/14866c80-d6b5-11ea-84f1-a824c550bb7d"})]),x("div",{pxsm:"",pyxs:"","bg-hex-f6f8fa":""},[x("div",{class:"row1",flex:"","justify-between":"",myxs:""},[x("div",{flex:""},[x("div",{class:"tag thin-8"},"创业"),x("div",{class:"tag thin-8"},"售楼处当托"),x("div",{class:"tag thin-8"},"物联网")]),x("div",null,[x("div",{class:"more thin-500 round"},[x("h1",{w30:"",h30:"","i-ri-arrow-drop-down-line":""})])])]),x("div",{class:"title","text-35":"","line-clamp-2":""},"福建一男子摄入卡路里结果卡路里"),x("div",{flex:"","justify-between":"","text-20":"","text-gray":"",mtxs:""},[x("div",null,"3 天前更新"),x("div",{"flex-center":""},[x("div",{"i-ri-star-fill":"",mlsm:"",mrxs:""}),x("div",null,"238"),x("div",{"i-ri-thumb-up-fill":"",mlsm:"",mrxs:""}),x("div",null,"1.5k+"),x("div",{"i-ri-brush-fill":"",mlsm:"",mrxs:""}),x("div",null,"24")])])]),x("div",{psm:""},[x("div",{"line-clamp-3":"","text-27":""}," 根据现场情况，消防员立即对水泥盖板周围杂物及缝隙里的小石块及泥土进行清理，随后用撬棍等工具撬动水泥盖板。经过3分钟救助，被困人员成功脱困。 ")])])])}}),[["__scopeId","data-v-3a06841e"]]);const Y=e({setup(e){z(S),d(!1);const a=E({value:"",searched:""});q("searchInfo",a);let i=o((()=>{const{navBarHeight:e}=v.Global,{statusBarHeight:t}=v.Global.systemInfo;return e+t+u(30)+"px"}));return(e,a)=>{const n=U(L("sys"),M);return t(),s(n,{top:i.value},{fixed:l((()=>[m(P),I(' <Fab @click="log"></Fab> ')])),default:l((()=>[x("div",{ptsm:""}),(t(),p(T,null,O(10,(e=>m(W,{key:e}))),64))])),_:1},8,["top"])}}});export{Y as default};
